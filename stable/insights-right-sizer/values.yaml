createSecret: false

# uninstallVPA -- Enabling this flag will remove a vpa installation that was previously managed with this chart. It is considered deprecated and will be removed in a later release.
uninstallVPA: false

vpa:
  enabled: true
  recommender:
    image:
      # modified vpa-recommender image
      repository: quay.io/fairwinds/vpa-recommender
      tag: master
    extraArgs:
      use-insights-recommender: 'true'
    # should be set to {{ include "insights-agent.fullname" . }}-token
    # envFromSecret: insights-agent-token
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      runAsUser: 65534
      capabilities:
        drop:
        - ALL

metrics-server:
  # metrics-server.enabled -- If true, the metrics-server will be installed as a sub-chart
  enabled: false
  apiService:
    create: true

image:
  # modified goldilocks image
  repository: quay.io/fairwinds/insights-right-sizer
  tag: v0.0.2-dev
  # image.pullPolicy -- imagePullPolicy - Highly recommended to leave this as `Always`
  pullPolicy: Always

# imagePullSecrets -- A list of image pull secret names to use
imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

controller:
  # controller.enabled -- Whether or not to install the controller deployment
  enabled: true
  # controller.revisionHistoryLimit -- Number of old replicasets to retain, default is 10, 0 will garbage-collect old replicasets
  revisionHistoryLimit: 10
  rbac:
    # controller.rbac.create -- If set to true, rbac resources will be created for the controller
    create: true
    # controller.rbac.enableArgoproj -- If set to true, the clusterrole will give access to argoproj.io resources
    enableArgoproj: true
    # controller.rbac.extraRules -- Extra rbac rules for the controller clusterrole
    extraRules: []
    # controller.rbac.extraClusterRoleBindings -- A list of ClusterRoles for which ClusterRoleBindings will be created for the ServiceAccount, if enabled
    extraClusterRoleBindings:
      - view
  serviceAccount:
    # controller.serviceAccount.create -- If true, a service account will be created for the controller. If set to false, you must set `controller.serviceAccount.name`
    create: true
    # controller.serviceAccount.name -- The name of an existing service account to use for the controller. Combined with `controller.serviceAccount.create`
    name:

  # controller.flags -- A map of additional flags to pass to the controller
  flags:
    on-by-default: false
  # controller.logVerbosity -- Controller log verbosity. Can be set from 1-10 with 10 being extremely verbose
  logVerbosity: "2"
  # controller.nodeSelector -- Node selector for the controller pod
  nodeSelector: {}
  # controller.tolerations -- Tolerations for the controller pod
  tolerations: []
  # controller.affinity -- Affinity for the controller pods
  affinity: {}
  # controller.topologySpreadConstraints -- Topology spread constraints for the controller pods
  topologySpreadConstraints: []
  # controller.resources -- The resources block for the controller pods
  resources:
    limits: {}
    requests:
      cpu: 25m
      memory: 256Mi
  # controller.podSecurityContext -- Defines the podSecurityContext for the controller pod
  podSecurityContext:
    seccompProfile:
      type: RuntimeDefault
  # controller.securityContext -- The container securityContext for the controller container
  securityContext:
    readOnlyRootFilesystem: true
    allowPrivilegeEscalation: false
    runAsNonRoot: true
    runAsUser: 10324
    capabilities:
      drop:
        - ALL

  deployment:
    # controller.deployment.extraVolumeMounts -- Extra volume mounts for the controller container
    extraVolumeMounts: []
    # controller.deployment.extraVolumes -- Extra volumes for the controller pod
    extraVolumes: []
    # controller.deployment.annotations -- Extra annotations for the controller deployment
    annotations: {}
    # controller.deployment.additionalLabels -- Extra labels for the controller deployment
    additionalLabels: {}

    # controller.deployment.podAnnotations -- Extra annotations for the controller pod
    podAnnotations: {}

# config -- The [goldilocks configuration]() Optional
config: null

# configUrl could also be supported if there is a use case
